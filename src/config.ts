import { env } from 'process';
import dotenv from 'dotenv';
import path from 'path';

dotenv.config();

function requiredEnv(key: string): string {
    const value = env[key];
    if (!value) {
        throw new Error(`Missing environment variable ${key}`);
    }
    return value;
}

export default {
    TMP_DIR_PATH: path.join(__dirname, '../tmp'),
    RESULTS_PATH: path.join(__dirname, '../results'),
    GITHUB_USERNAME: requiredEnv('GITHUB_USERNAME'),
    GITHUB_TOKEN: requiredEnv('GITHUB_TOKEN'),
    GITHUB_GRAPHQL_API: 'https://api.github.com/graphql',
    GITHUB_GRAPHQL_API_SECURITY_PREVIEW_ACCEPT_HEADER: 'application/vnd.github.hawkgirl-preview+json',
    // @ts-ignore
    usingTsNode: !!process[Symbol.for('ts-node.register.instance')],
};
