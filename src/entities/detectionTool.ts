import { Column, Entity, OneToMany, PrimaryGeneratedColumn, Unique } from 'typeorm';
import { Dependency } from './dependency';
import { ManualReview } from './manualReview';
import { ProjectError } from './projectError';
import { ToolExecution } from './toolExecution';
import { Vulnerability } from './vulnerability';

@Entity()
@Unique(['name', 'version'])
export class DetectionTool {
    @PrimaryGeneratedColumn()
    id!: number;

    @Column()
    name!: string;

    @Column()
    version!: string;

    @OneToMany(() => ProjectError, (projectError) => projectError.detectionTool)
    projectErrors!: ProjectError[];

    @OneToMany(() => Dependency, (dependency) => dependency.tool)
    dependencies!: Dependency[];

    @OneToMany(() => Vulnerability, (vulnerability) => vulnerability.tool)
    vulnerabilities!: Vulnerability[];

    @OneToMany(() => ToolExecution, (toolExecution) => toolExecution.tool)
    toolExecutions!: ToolExecution[];

    @OneToMany(() => ManualReview, (manualReview) => manualReview.tool)
    manualReviews!: ManualReview[];
}
