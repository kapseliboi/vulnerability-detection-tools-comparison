import { Column, Entity, OneToMany, PrimaryGeneratedColumn, Unique } from 'typeorm';
import { ProjectError } from './projectError';
import { ToolExecution } from './toolExecution';
import { Vulnerability } from './vulnerability';

@Entity()
@Unique(['name', 'version'])
export class DetectionTool {
    @PrimaryGeneratedColumn()
    id!: number;

    @Column()
    name!: string;

    @Column()
    version!: string;

    @OneToMany(() => ProjectError, (projectError) => projectError.detectionTool)
    projectErrors!: ProjectError[];

    @OneToMany(() => Vulnerability, (vulnerability) => vulnerability.toolExecution)
    vulnerabilities!: Vulnerability[];

    @OneToMany(() => ToolExecution, (toolExecution) => toolExecution.tool)
    toolExecutions!: ToolExecution[];
}
